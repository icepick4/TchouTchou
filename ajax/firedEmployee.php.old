<!DOCTYPE html>
<html>

<body>
    // si y a une erreur mesci d'aller voir Loan directement / pas tester
    
    <?php
    chdir("../");
    //pour utiliser le fichier de config de base
    $skipSession = true;
    require_once('./config/configuration.php');
    require_once(PATH_TEXTES . LANG . '.php');
    require_once(PATH_MODELS . 'StaffDAO.php');
    require_once(PATH_MODELS . 'UserDAO.php');
    $staff = new StaffDAO();

    if ($staff->isHumanResource(intval($_GET['user_id'])) || $staff->isAdministrator(intval($_GET['user_id']))) {

        $user = new UserDAO();
        if ($staff->isDriver(intval($_GET['id']))) {
            if ($staff->getNbrDriverTravelPlanned(intval($_GET['id'])) > 0) {
                header("Location: index.php?page=staff");
                die();
            }
        }
        $staff->firedEmployee(intval($_GET['id']));
        $user->setUserType(intval($_GET['id']), 0);
        header("Refresh:0");
    } else {
        header("Location: index.php?page=staff");
        die();
    }
